<?phpnamespace Controllers\Checkout;use Dao\Cart\Cart as CartDao;use Utilities\Site;class Carrito extends \Controllers\PublicController{    private $viewData;    private function obtenerCarrito()    {        $usercod = \Utilities\Security::getUserId();        $session = session_id();                $cartDao = new CartDao();        $this->viewData["carrito"] = $cartDao->obtenerCarrito($usercod);        $carrito = $cartDao->obtenerCarrito($usercod);        $subtotal = 0;        $isv = 0;        foreach ($carrito as $item) {            $subtotal += $item['libroPrecio'] * $item['crrctd'];            $isv += 15 * $item['crrctd'];        }         // Asume un ISV del 15%        $total = $subtotal + $isv;        $this->viewData["total"] = $total;        $this->viewData["subtotal"] = $subtotal;        $this->viewData["isv"] = $isv;    }    public function run(): void    {        if($this->isPostBack()){            $libroId = $_POST["libroId"] ?? 0;            CartDao::deleteProduct(\Utilities\Security::getUserId(), $libroId);            Site::redirectToWithMsg("index.php?page=Checkout_Carrito", "Producto eliminado del carrito");                    }        $this->obtenerCarrito();        \Views\Renderer::render("carrito/carrito", $this->viewData);    }}
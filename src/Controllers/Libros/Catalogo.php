<?phpnamespace Controllers\Libros;use Controllers\PublicController;use Dao\Cart\Cart;use Dao\Cart\Cart as CartDao;use Dao\Security\Security;use Views\Renderer;use Dao\Libros\Libros as LibrosDao;use Utilities\Site;class Catalogo extends PublicController{    private function getAllLibros()    {        $this->viewData["libros"] = LibrosDao::getAll(1000);    }    public function run(): void    {        $usercod = \Utilities\Security::getUserId();        if ($this->isPostBack()) {                        if (\Utilities\Security::isLogged()) {                try {                    $crrctd = isset($_POST["cantidad"]) ? $_POST["cantidad"] : 0;                    $crrprc = isset($_POST["precio"]) ? $_POST["precio"] : 0;                    $crrfching = date("Y-m-d H:i:s");                    $libroId = isset($_POST["libroId"]) ? $_POST["libroId"] : 0;                    CartDao::insertProduct($usercod, $libroId, $crrctd, $crrprc, $crrfching);                    Site::redirectToWithMsg("index.php?page=Libros_Catalogo", "Producto agregado al carrito.");                } catch (\Exception $ex) {                    Site::redirectToWithMsg("index.php?page=Libros_Catalogo", "El producto ya esta en el carrito.");                }            } else {                Site::redirectToWithMsg("index.php?page=sec_login", "Inicie sesion para agregar productos.");            }        }        $this->getAllLibros();        Renderer::render("libros/catalogo", $this->viewData);    }}